# S3 Configuration
# Toggle between DevServices (testcontainers) and external Docker Compose
# Set USE_DEVSERVICES=false to use Docker Compose LocalStack
quarkus.s3.devservices.enabled=${USE_DEVSERVICES:true}
quarkus.s3.aws.region=us-east-1
quarkus.s3.aws.credentials.type=static
quarkus.s3.aws.credentials.static-provider.access-key-id=${AWS_ACCESS_KEY_ID:test}
quarkus.s3.aws.credentials.static-provider.secret-access-key=${AWS_SECRET_ACCESS_KEY:test}
quarkus.s3.sync-client.type=apache

# S3 Endpoint (only used when DevServices is disabled)
# When DevServices is enabled, this is ignored and testcontainers manages the endpoint
%dev.quarkus.s3.endpoint-override=${S3_ENDPOINT_URL:http://localhost:4566}

# Bucket Configuration
bucket.name=${S3_BUCKET_NAME:whisper-uploads}
quarkus.s3.devservices.buckets=${bucket.name}

# Application Base Path
quarkus.http.root-path=/whisper
# Note: No quarkus.rest.path - use @Path annotations for full control

# Multipart/File Upload Configuration
quarkus.http.limits.max-body-size=100M
quarkus.resteasy-reactive.multipart.file-content-types=audio/mpeg,audio/mp3,application/octet-stream
quarkus.resteasy-reactive.multipart.input-part.default-content-type=application/octet-stream

# OpenAPI/Swagger Configuration
quarkus.smallrye-openapi.path=/swagger
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.path=/swagger-ui
mp.openapi.extensions.smallrye.info.title=Whisper MP3 Upload API
mp.openapi.extensions.smallrye.info.version=1.0.0
mp.openapi.extensions.smallrye.info.description=API for uploading MP3 files to S3 with passphrase authentication
mp.openapi.extensions.smallrye.info.contact.name=Cresterida
mp.openapi.extensions.smallrye.info.license.name=Apache 2.0

# Quinoa configuration
quarkus.quinoa.ui-dir=src/main/webui
quarkus.quinoa.package-manager=npm
quarkus.quinoa.dev-server.port=4200
quarkus.quinoa.package-manager-install=true
quarkus.quinoa.dev-server=true
quarkus.quinoa.dev-server.direct-forwarding=true
quarkus.quinoa.dev-server.check-timeout=60000
# 2. Specify the version your Angular project needs (matching the error message)
quarkus.quinoa.package-manager-install.node-version=22.12.0

# Optional: If you use NPM, usually it's bundled with Node, but you can explicitly enable installation
quarkus.quinoa.package-manager-install.npm-version=10.9.0
